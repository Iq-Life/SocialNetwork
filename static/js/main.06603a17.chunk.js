(this["webpackJsonpmy-react"]=this["webpackJsonpmy-react"]||[]).push([[0],{132:function(e,t,n){e.exports=n.p+"static/media/805.f32be7a1.svg"},134:function(e,t,n){e.exports={content:"Profile_content__3SeNT"}},135:function(e,t,n){e.exports=n.p+"static/media/no.7b994355.png"},136:function(e,t,n){e.exports=n.p+"static/media/yes.935574cf.png"},137:function(e,t,n){e.exports={blockProfile:"ProfileDataForm_blockProfile__2S0va",blockPhoto:"ProfileDataForm_blockPhoto__3JK0h",blockInfo:"ProfileDataForm_blockInfo__kqzuJ",head:"ProfileDataForm_head__2y-Wm",avaProfile:"ProfileDataForm_avaProfile__35YjB",contacts:"ProfileDataForm_contacts__3H-ji"}},138:function(e,t,n){e.exports={item:"Post_item__3w5gu"}},14:function(e,t,n){e.exports={nav:"Navbar_nav__1CjYi",item:"Navbar_item__3V3a3",activeLink:"Navbar_activeLink__39u1E"}},165:function(e,t,n){e.exports=n(295)},170:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},26:function(e,t,n){e.exports={dialogs:"Dialog_dialogs__2KmIO",dialogsItems:"Dialog_dialogsItems__3mI_E",active:"Dialog_active__5pVRS",messages:"Dialog_messages__2N_Yp",message:"Dialog_message__mB0NA",dialog:"Dialog_dialog__3QJ_9",textMessages:"Dialog_textMessages__3ehuU"}},295:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=(n(96),n(61)),c=n.n(o),i=n(22),l=n(23),s=n(24),u=n(25),m=(n(170),n(14)),f=n.n(m),p=n(11),d=function(){return r.a.createElement("nav",{className:f.a.nav},r.a.createElement("div",{className:f.a.item},r.a.createElement(p.b,{to:"/profile",activeClassName:f.a.activeLink},"Profile")),r.a.createElement("div",{className:f.a.item},r.a.createElement(p.b,{to:"/dialogs",activeClassName:f.a.activeLink},"Messages")),r.a.createElement("div",{className:f.a.item},r.a.createElement(p.b,{to:"/users",activeClassName:f.a.activeLink},"Users")),r.a.createElement("div",{className:f.a.item},r.a.createElement(p.b,{to:"/news",activeClassName:f.a.activeLink},"News")),r.a.createElement("div",{className:f.a.item},r.a.createElement(p.b,{to:"/music",activeClassName:f.a.activeLink},"Music")),r.a.createElement("div",{className:f.a.item},r.a.createElement(p.b,{to:"/settings",activeClassName:f.a.activeLink},"Settings")))},g=n(8);n(175);var E=function(){return r.a.createElement("div",null,"set")};n(176);var v=function(){return r.a.createElement("div",null,"new")};n(177);var h=function(){return r.a.createElement("div",null,"mus")},b=n(41),_=n(9),P={dialogs:[{id:1,name:"Diana"},{id:2,name:"Kirill"},{id:3,name:"Ilya"},{id:4,name:"Anton"},{id:5,name:"Maldor"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your it-kamasutra?"},{id:3,message:"Yo"},{id:4,message:"Hi"},{id:5,message:"Pi"}]},O=n(10),S=n(26),k=n.n(S);var w=function(e){var t="/dialogs/"+e.id;return r.a.createElement("div",{className:k.a.dialog+" "+k.a.active},r.a.createElement(p.b,{to:t},e.name))};var j=function(e){return r.a.createElement("div",{className:k.a.message},e.message)},y=n(126),C=n(127),N=n(94),I=n(89),T=n.n(I),U=function(e){var t=e.meta,n=t.touched,a=t.error,o=e.children,c=n&&a;return r.a.createElement("div",{className:T.a.formControl+" "+(c?T.a.error:"")},r.a.createElement("div",null,o),c&&r.a.createElement("span",null,a))},x=function(e){var t=e.input,n=(e.meta,e.children,Object(N.a)(e,["input","meta","children"]));return r.a.createElement(U,e," ",r.a.createElement("textarea",Object.assign({},t,n))," ")},F=function(e){var t=e.input,n=(e.meta,e.children,Object(N.a)(e,["input","meta","children"]));return r.a.createElement(U,e," ",r.a.createElement("input",Object.assign({},t,n))," ")};function A(e,t,n,a,o,c){return r.a.createElement("div",null,r.a.createElement(y.a,Object.assign({placeholder:e,name:t,component:a,validate:n},o))," ",c)}var L=function(e){return e?void 0:"Field is required"},D=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}};var M,R,z=D(50),G=Object(C.a)({form:"newMessageBody"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(y.a,{placeholder:"Enter Your message",name:"newMessageBody",component:x,validate:[L,z]})),r.a.createElement("button",null,"add message"))})),H=function(e){var t=e.dialogsPage.dialogs.map((function(e){return r.a.createElement(w,{name:e.name,id:e.id})})),n=e.dialogsPage.messages.map((function(e){return r.a.createElement(j,{id:e.id,message:e.message})}));return e.isAuth?r.a.createElement("div",{className:k.a.dialogs},r.a.createElement("div",{className:k.a.dialogsItems},t),r.a.createElement("div",{className:k.a.messages},r.a.createElement("div",null,n),r.a.createElement("div",null,r.a.createElement(G,{onSubmit:function(t){e.addMessage(t.newMessageBody)}})))):r.a.createElement(g.a,{to:"/login"})},B=function(e){return{isAuth:e.auth.isFetching}},Y=n(7),W=Object(Y.d)(Object(O.b)((function(e){return{dialogsPage:e.dialogsPage}}),{addMessage:function(e){return{type:"ADD_MESSAGE",newMessageBody:e}}}),(function(e){var t=function(t){Object(u.a)(a,t);var n=Object(s.a)(a);function a(){return Object(i.a)(this,a),n.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(g.a,{to:"login/"})}}]),a}(r.a.Component);return Object(O.b)(B)(t)}))(H),J=n(5),V=n.n(J),K=n(12),q=n(131),Q=n.n(q).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"d9baecdc-1ca4-440c-8d10-aee3256853c8"}}),Z=function(){return Q.get("security/get-captcha-url")};!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(M||(M={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(R||(R={}));var X=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(_.a)({},e,{},a):e}))},$={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Q.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return Q.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return Q.delete("follow/".concat(e)).then((function(e){return e.data}))}},ee={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},te=function(e){return{type:"FOLLOWED",usersID:e}},ne=function(e){return{type:"UNFOLLOWED",usersID:e}},ae=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},re=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},oe=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},ce=function(){var e=Object(K.a)(V.a.mark((function e(t,n,a,r){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(oe(!0,n)),e.next=3,a(n);case 3:e.sent.resultCode==M.Success&&t(r(n)),t(oe(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ie=n(67),le=n.n(ie),se=n(34),ue=n(68),me=n.n(ue),fe=function(e){for(var t=e.portionSize,n=e.totalItemsCount,o=e.pageSize,c=e.currentPage,i=e.onPageChange,l=Math.ceil(n/o),s=[],u=1;u<=l;u++)s.push(u);var m=Math.ceil(l/t),f=Object(a.useState)(1),p=Object(se.a)(f,2),d=p[0],g=p[1],E=(d-1)*t+1,v=d*t;return r.a.createElement("div",{className:me.a.spanPage},d>1&&r.a.createElement("button",{onClick:function(){g(d-1)}},"back"),s.filter((function(e){return e>=E&&e<=v})).map((function(e){return r.a.createElement("span",{className:c===e?me.a.selectedPage:me.a.usersPage,onClick:function(t){i(e)}},e)})),m>d&&r.a.createElement("button",{onClick:function(){g(d+1)}},"next"))},pe=n(65),de=n.n(pe),ge=n(92),Ee=n.n(ge),ve=function(e){var t=e.user;return r.a.createElement("div",{className:Ee.a.user},r.a.createElement("div",null,r.a.createElement(p.b,{to:"/profile/"+t.id},r.a.createElement("img",{className:Ee.a.ava,src:null!=t.photos.small?t.photos.small:de.a,alt:"ava"}))),r.a.createElement("div",null,t.followed?r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)}},"Unfollow"):r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)}},"Follow")),r.a.createElement("div",null,t.name),r.a.createElement("div",null,t.status),r.a.createElement("div",null,"user.location.country"),r.a.createElement("div",null,"user.location.city"))},he=function(e){for(var t=e.users,n=e.follow,a=e.unfollow,o=e.totalUsersCount,c=e.pageSize,i=e.currentPage,l=e.onPageChange,s=e.followingInProgress,u=Math.ceil(o/c),m=[],f=1;f<=u;f++)m.push(f);return r.a.createElement("div",{className:le.a.all},r.a.createElement("div",{className:le.a.paginator},r.a.createElement(fe,{totalItemsCount:o,pageSize:c,currentPage:i,onPageChange:l,portionSize:15})),r.a.createElement("div",{className:le.a.users},t.map((function(e){return r.a.createElement(ve,{key:e.id,user:e,followingInProgress:s,follow:n,unfollow:a})}))))},be=n(132),_e=n.n(be),Pe=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:_e.a,alt:"loading..."}))},Oe=n(133),Se=Object(Oe.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),ke=function(e){return e.usersPage.pageSize},we=function(e){return e.usersPage.totalUsersCount},je=function(e){return e.usersPage.currentPage},ye=function(e){return e.usersPage.isFetching},Ce=function(e){return e.usersPage.followingInProgress},Ne=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChange=function(t){var n=e.props.pageSize;e.props.getUsersThunkCreator(t,n)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.getUsersThunkCreator(t,n)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(Pe,null):null,r.a.createElement(he,{totalUsersCount:this.props.totalUsersCount,users:this.props.users,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChange:this.onPageChange,unfollow:this.props.unfollow,follow:this.props.follow,followingInProgress:this.props.followingInProgress}))}}]),n}(r.a.Component),Ie=Object(Y.d)(Object(O.b)((function(e){return{users:Se(e),pageSize:ke(e),totalUsersCount:we(e),currentPage:je(e),isFetching:ye(e),followingInProgress:Ce(e)}}),{follow:function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ce(n,e,$.follow.bind(e),te);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ce(n,e,$.unfollow.bind(e),ne);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUsersThunkCreator:function(e,t){return function(){var n=Object(K.a)(V.a.mark((function n(a){var r;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(re(!0)),a(ae(e)),n.next=4,$.getUsers(e,t);case 4:r=n.sent,a(re(!1)),a({type:"SET_USERS",users:r.items}),a({type:"SET_TOTAL_USERS_COUNT",count:r.totalCount});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(Ne),Te=n(134),Ue=n.n(Te),xe=n(135),Fe=n.n(xe),Ae=n(136),Le=n.n(Ae),De=function(e){var t=e.status,n=e.updateStatusProfile,o=Object(a.useState)(!1),c=Object(se.a)(o,2),i=c[0],l=c[1],s=Object(a.useState)(t),u=Object(se.a)(s,2),m=u[0],f=u[1];Object(a.useEffect)((function(){f(t)}),[t]);var p=function(){l(!1),n(m)};return r.a.createElement("div",null,!i&&r.a.createElement("div",null,r.a.createElement("span",{onDoubleClick:function(){l(!0)}},t||" --- ")),i&&r.a.createElement("div",null,r.a.createElement("input",{onFocus:function(e){e.target.select()},autoFocus:!0,onBlur:p,value:m,onChange:function(e){f(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&p()}})))},Me=n(35),Re=n.n(Me),ze=n(137),Ge=n.n(ze),He=n(51),Be=n.n(He),Ye=Object(C.a)({form:"edit-profile"})((function(e){var t=e.profile,n=e.handleSubmit,a=e.error;return r.a.createElement("form",{onSubmit:n,className:Ge.a.blockInfo},r.a.createElement("div",null,r.a.createElement("b",null,"Name"),":",A("Full Name","fullName",[],F,null,null)),r.a.createElement("div",null,r.a.createElement("b",null,"About me"),":",A("About me","aboutMe",[],x,null,null)),r.a.createElement("div",null,r.a.createElement("b",null,"Looking for a job"),":",A("Looking for a job?","lookingForAJob",[],F,{type:"checkbox"},null)),r.a.createElement("div",null,r.a.createElement("b",null,"My professional skills"),":",A("My professional skills","lookingForAJobDescription",[],x,null,null)),r.a.createElement("div",null,r.a.createElement("b",null,"Contacts"),":",Object.keys(t.contacts).map((function(e){return r.a.createElement("div",{key:e,className:Be.a.contacts},r.a.createElement("b",null,e,":",A(e,"contacts."+e,[],F,null,null)))}))),a&&r.a.createElement("div",{className:Be.a.formSummaryError},a),r.a.createElement("button",null,"save"))})),We=function(e){var t=e.profile,n=e.status,o=e.isOwner,c=e.savePhoto,i=e.updateStatusProfile,l=e.saveProfile,s=Object(a.useState)(!1),u=Object(se.a)(s,2),m=u[0],f=u[1];if(!t)return r.a.createElement(Pe,null);return r.a.createElement("div",{className:Re.a.blockProfile},r.a.createElement("div",null,m?r.a.createElement(Ye,{initialValues:t,profile:t,onSubmit:function(e){l(e).then((function(){f(!1)}))}}):r.a.createElement(Je,{profile:t,goToEditMode:function(){return f(!0)}})),r.a.createElement("div",{className:Re.a.blockPhoto},r.a.createElement("div",null,r.a.createElement("b",null,"Status"),":",r.a.createElement(De,{status:n,updateStatusProfile:i})),r.a.createElement("div",null,r.a.createElement("img",{className:Re.a.avaProfile,src:t.photos.large||de.a,alt:"user avatar"}),r.a.createElement("div",null,o&&r.a.createElement("input",{className:Re.a.input,type:"file",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&c(e.target.files[0])}})))))},Je=function(e){var t=e.profile,n=e.goToEditMode;return r.a.createElement("div",{className:Re.a.blockInfo},r.a.createElement("div",null,r.a.createElement("b",null,"Name"),": ",r.a.createElement("div",null,t&&t.fullName)),r.a.createElement("div",null,r.a.createElement("b",null,"About me"),": ",t&&t.aboutMe),r.a.createElement("div",null,r.a.createElement("b",null,"Looking for a job"),": ",t&&t.lookingForAJob?r.a.createElement("img",{src:Le.a,alt:"Yes",width:30,height:30}):r.a.createElement("img",{src:Fe.a,alt:"No",width:30,height:30})),r.a.createElement("div",null,r.a.createElement("b",null,"My professional skills"),": ",t&&t.lookingForAJobDescription),r.a.createElement("div",null,r.a.createElement("b",null,"Contacts"),": ",Object.keys(t.contacts).map((function(e){return r.a.createElement(Ve,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))),r.a.createElement("button",{onClick:function(){return n()}},"edit"))},Ve=function(e){return r.a.createElement("div",{className:Re.a.contacts},r.a.createElement("b",null,e.contactTitle),": ",e.contactValue)},Ke=n(93),qe=n.n(Ke),Qe=n(138),Ze=n.n(Qe);var Xe=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:Ze.a.item},r.a.createElement("img",{src:"https://img3.goodfon.ru/wallpaper/nbig/4/99/neytiri-avatar.jpg",alt:"Avatar"}),e.message,r.a.createElement("div",null,r.a.createElement("span",null,"like"),"  ",e.like)))},$e=r.a.memo((function(e){var t=e.posts.map((function(e){return r.a.createElement(Xe,{id:e.id,message:e.message,like:e.like,key:e.id})}));return r.a.createElement("div",{className:qe.a.allPost},r.a.createElement("h3",null,"My post"),r.a.createElement("div",null,r.a.createElement(tt,{onSubmit:function(t){e.addPost(t.newPostText)}}),r.a.createElement("div",{className:qe.a.item},t)))})),et=D(25),tt=Object(C.a)({form:"newPostText"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(y.a,{placeholder:"Enter Your post",name:"newPostText",component:x,validate:[L,et]})),r.a.createElement("div",null,r.a.createElement("button",null,"add post")))})),nt=$e,at=n(21),rt=function(e){return Q.get("profile/"+e).then((function(e){return e.data}))},ot=function(e){return Q.get("profile/status/"+e).then((function(e){return e.data}))},ct=function(e){return Q.put("profile/status",{status:e}).then((function(e){return e.data}))},it=function(e){var t=new FormData;return t.append("image",e),Q.put("profile/photo",t).then((function(e){return e.data}))},lt=function(e){return Q.put("profile",e).then((function(e){return e.data}))},st={posts:[{id:1,message:"Hi, how are you?",like:56},{id:2,message:"It's my first post",like:434},{id:3,message:"Boom !",like:44},{id:4,message:"I lick banana",like:4554}],profile:null,status:""},ut=function(e){return{type:"SET_STATUS",status:e}},mt=function(e){return{type:"SAVE_PHOTO_SUCCESS",photos:e}},ft=function(e){return{type:"SAVE_PROFILE_SUCCESS",profile:e}},pt=Object(O.b)((function(e){return{posts:e.profilePage.posts}}),{addPost:function(e){return{type:"ADD_POST",newPostText:e}}})(nt);function dt(e){return r.a.createElement("div",{className:Ue.a.content},r.a.createElement(We,{profile:e.profile,status:e.status,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile,updateStatusProfile:e.updateStatusProfile}),r.a.createElement(pt,null))}var gt=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e="".concat(this.props.authorizedUserId))||this.props.history.push("/login"),this.props.getUserProfile(+e),this.props.getUserStatus(+e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(dt,Object.assign({},this.props,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatusProfile:this.props.updateStatusProfile,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})))}}]),n}(r.a.Component),Et=Object(Y.d)(Object(O.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isFetching}}),{getUserProfile:function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(e);case 2:a=t.sent,n({type:"SET_USER_PROFILE",profile:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUserStatus:function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot(e);case 2:a=t.sent,n(ut(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatusProfile:function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct(e);case 2:(a=t.sent).resultCode===M.Success?n(ut(e)):alert(a.messages[0]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it(e);case 2:(a=t.sent).resultCode===M.Success&&n(mt(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(K.a)(V.a.mark((function t(n){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt(e);case 2:if((a=t.sent).resultCode!==M.Success){t.next=7;break}n(ft(e)),t.next=9;break;case 7:return n(Object(at.a)("edit-profile",{_error:a.messages[0]})),t.abrupt("return",Promise.reject(a.messages[0]));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),g.g)(gt),vt=n(52),ht=n.n(vt);var bt=function(e){return r.a.createElement("div",{className:ht.a.backImg},r.a.createElement("header",{className:ht.a.header},r.a.createElement("div",{className:ht.a.loginBock},e.isFetching?r.a.createElement("div",{className:ht.a.loginBockAuthorized},e.login,r.a.createElement("button",{onClick:e.logout},"Logout")):r.a.createElement(p.b,{to:"/login"},"LogIN"))))},_t=function(){return Q.get("auth/me").then((function(e){return e.data}))},Pt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Q.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},Ot=function(){return Q.delete("auth/login")},St={id:null,email:null,login:null,isFetching:!1,captchaUrl:null},kt=function(e,t,n,a){return{type:"SET_USER_DATA",payload:{id:e,email:t,login:n,isFetching:a}}},wt=function(e){return{type:"GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},jt=function(){return function(){var e=Object(K.a)(V.a.mark((function e(t){var n,a,r,o,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t();case 2:(n=e.sent).resultCode===M.Success&&(a=n.data,r=a.id,o=a.email,c=a.login,t(kt(r,o,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},yt=function(){return function(){var e=Object(K.a)(V.a.mark((function e(t){var n,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:n=e.sent,a=n.data.url,t(wt(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ct=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(bt,this.props)}}]),n}(r.a.Component),Nt=Object(O.b)((function(e){return{isFetching:e.auth.isFetching,login:e.auth.login}}),{logout:function(){return function(){var e=Object(K.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot();case 2:e.sent.data.resultCode===M.Success&&t(kt(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Ct),It=Object(C.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaUrl;return r.a.createElement("form",{onSubmit:t},A("Email","email",[L],F,null,null),A("Password","password",[L],F,{type:"password"},null),A(null,"rememberMe",[],F,{type:"checkbox"},"remember me"),a&&r.a.createElement("img",{src:a}),a&&A("Symbols from image","captcha",[L],F,{},null),n&&r.a.createElement("div",{className:Be.a.formSummaryError},n),r.a.createElement("div",null,r.a.createElement("button",null,"Login")))})),Tt=Object(O.b)((function(e){return{isFetching:e.auth.isFetching,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,n,a){return function(){var r=Object(K.a)(V.a.mark((function r(o){var c,i;return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Pt(e,t,n,a);case 2:(c=r.sent).resultCode===M.Success?o(jt()):(c.resultCode===R.CaptchaIsRequired&&o(yt()),i=c.messages.length>0?c.messages[0]:"Some error",o(Object(at.a)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isFetching?r.a.createElement(g.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(It,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))})),Ut={},xt=n(139),Ft=n(128),At={initialized:!1},Lt=Object(Y.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var n={id:(new Date).getTime(),message:t.newPostText,like:0};return Object(_.a)({},e,{posts:[n].concat(Object(b.a)(e.posts))});case"DELETE_POST":return Object(_.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.id}))});case"SET_USER_PROFILE":return Object(_.a)({},e,{profile:t.profile});case"SET_STATUS":return Object(_.a)({},e,{status:t.status});case"SAVE_PHOTO_SUCCESS":return Object(_.a)({},e,{profile:Object(_.a)({},e.profile,{photos:t.photos})});case"SAVE_PROFILE_SUCCESS":return Object(_.a)({},e,{profile:t.profile});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return Object(_.a)({},e,{messages:[].concat(Object(b.a)(e.messages),[{id:6,message:t.newMessageBody}])});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOWED":return Object(_.a)({},e,{users:X(e.users,t.usersID,"id",{followed:!0})});case"UNFOLLOWED":return Object(_.a)({},e,{users:X(e.users,t.usersID,"id",{followed:!1})});case"SET_USERS":return Object(_.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(_.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(_.a)({},e,{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(_.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(_.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(b.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;return e},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":case"GET_CAPTCHA_URL_SUCCESS":return Object(_.a)({},e,{},t.payload);default:return e}},form:Ft.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INITIALIZED":return Object(_.a)({},e,{initialized:!0});case"SET_ERROR_MESSAGE":return Object(_.a)({},e,{errorMessage:""});default:return e}}}),Dt=Object(Y.e)(Lt,Object(Y.a)(xt.a));window.stroe=Dt;var Mt=Dt,Rt=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.props.initialize?r.a.createElement("div",{className:"all"},r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("div",{className:"header"},r.a.createElement(Nt,null)),r.a.createElement("div",{className:"NavAndDisp"},r.a.createElement("div",{className:"navbar"},r.a.createElement(d,null)),r.a.createElement("div",{className:"display"},r.a.createElement(g.d,null,r.a.createElement(g.a,{exact:!0,from:"/",to:"/profile"}),r.a.createElement(g.b,{path:"/login",render:function(){return r.a.createElement(Tt,null)}}),r.a.createElement(g.b,{path:"/dialogs",render:function(){return r.a.createElement(W,null)}}),r.a.createElement(g.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(Et,null)}}),r.a.createElement(g.b,{path:"/users",render:function(){return r.a.createElement(Ie,null)}}),r.a.createElement(g.b,{path:"/settings",render:function(){return r.a.createElement(E,null)}}),r.a.createElement(g.b,{path:"/news",render:function(){return r.a.createElement(v,null)}}),r.a.createElement(g.b,{path:"/music",render:function(){return r.a.createElement(h,null)}}),r.a.createElement(g.b,{path:"*",render:function(){return r.a.createElement("div",null,"404 NOT FOUND")}})))))):r.a.createElement(Pe,null)}}]),n}(r.a.Component),zt=Object(Y.d)(g.g,Object(O.b)((function(e){return{initialize:e.app.initialized}}),{initializeApp:function(){return function(){var e=Object(K.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t(jt()),Promise.all([n]).then((function(){t({type:"SET_INITIALIZED"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(Rt),Gt=function(){return r.a.createElement(p.a,null,r.a.createElement(O.a,{store:Mt},r.a.createElement(zt,null)))};c.a.render(r.a.createElement(Gt,null),document.getElementById("root"))},35:function(e,t,n){e.exports={blockProfile:"ProfileInfo_blockProfile__2IM7m",blockPhoto:"ProfileInfo_blockPhoto__2PURC",blockInfo:"ProfileInfo_blockInfo__3Lrw8",head:"ProfileInfo_head__1IRYz",avaProfile:"ProfileInfo_avaProfile__3Grrl",contacts:"ProfileInfo_contacts__2pgHT"}},51:function(e,t,n){e.exports={formSummaryError:"Container_formSummaryError__3gGcR"}},52:function(e,t,n){e.exports={header:"Header_header__19o41",backImg:"Header_backImg__3nWE1",loginBock:"Header_loginBock__1YYQW",activeLink:"Header_activeLink__3GCQ1",loginBockAuthorized:"Header_loginBockAuthorized__2YPNb"}},65:function(e,t,n){e.exports=n.p+"static/media/ava.be951e71.png"},67:function(e,t,n){e.exports={all:"Users_all__29T66",users:"Users_users__1RLAP"}},68:function(e,t,n){e.exports={selectedPage:"Paginator_selectedPage__23BUL",usersPage:"Paginator_usersPage__3pZKX",spanPage:"Paginator_spanPage__3IpSq"}},89:function(e,t,n){e.exports={formControl:"FormsControls_formControl__X8OAE",error:"FormsControls_error__N2Hap"}},92:function(e,t,n){e.exports={ava:"User_ava__3fuiQ",user:"User_user__1ymtO"}},93:function(e,t,n){e.exports={content:"MyPosts_content__3K_PL",item:"MyPosts_item__3CMdZ",allPost:"MyPosts_allPost__X_O7x"}},96:function(e,t,n){}},[[165,1,2]]]);
//# sourceMappingURL=main.06603a17.chunk.js.map